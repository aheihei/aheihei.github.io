<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":5},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="原理 模拟计算机对服务器发起的Request请求 接受服务器端的Response内容并解析，提取所需的信息">
<meta property="og:type" content="article">
<meta property="og:title" content="爬虫基础-从零开始">
<meta property="og:url" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/index.html">
<meta property="og:site_name" content="A1ili&#39;s Blog">
<meta property="og:description" content="原理 模拟计算机对服务器发起的Request请求 接受服务器端的Response内容并解析，提取所需的信息">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/8afbde6f337b785ddbe1e3c89cb1605aa0b0b0f53098ecf6cb99fc8fbc494567.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/cd5e7b38fe329e81b4cdfe20540f2653826e80ee7dcb7566667e896aeffbf701.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/aabc0daff737955f57121884ceb93631578010ab39f9121b790f75c9e575d989.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/4179604d4357269cd0803c45a3114da6bcc6bcd5a65fd933c6af17279aefe1c5.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/e02eb1df0bb076c304c84e8343b3d4b5a257f41de908c4c79bd8536604fbc355.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/e54945d1278c258fd0de4af76832a3e493943485a5c4aeeb6d67f6fa67a55d75.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/6e37d345e26c874d67c98383ea661cda972ed0151e9439bc7a52f23ff2fcbebf.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/e2d15bbe0adef3531865a6d4fae414c018aac727657896deb762b7cfc0104af7.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/0a7ebde500e1077798346af020b5733b2d0c244fbc50dedc415fcc1b963b4329.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/1edb085d880b0f18d7a503c2e437446001797c769e08b9fa41ef950965f74a6a.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/98cdeb8165b2b10f16bf3395f8e8e8947c9264d3de8d4e36d69dc56c86381cc2.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/96d7eb1f96d9cb2947a2ecfb50ae8fee040538860db4ee0ce317d97cf7979626.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/0b1e53f6758ae790a333a394d56f4d9ca54d69bde372c9dafb5549e17af92075.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/74b51a3caf99edb6561cfc1147d08365c77ff3babbb4c3dc70373eda0d3bbb0e.png">
<meta property="og:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/3b5dbe9beef8e4dc98e0e94be6d3f4b953f5dac1c6b10b92f71f40f0d95f6306.png">
<meta property="article:published_time" content="2022-04-25T15:34:05.000Z">
<meta property="article:modified_time" content="2022-04-25T15:51:19.612Z">
<meta property="article:author" content="Brave Laughter">
<meta property="article:tag" content="爬虫">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/8afbde6f337b785ddbe1e3c89cb1605aa0b0b0f53098ecf6cb99fc8fbc494567.png">

<link rel="canonical" href="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>爬虫基础-从零开始 | A1ili's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">A1ili's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">keep on going</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/85364458.jfif">
      <meta itemprop="name" content="Brave Laughter">
      <meta itemprop="description" content="埋头苦干的劲头 抬头看路的清醒">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="A1ili's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          爬虫基础-从零开始
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-04-25 23:34:05 / 修改时间：23:51:19" itemprop="dateCreated datePublished" datetime="2022-04-25T23:34:05+08:00">2022-04-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><ul>
<li>模拟计算机对服务器发起的Request请求</li>
<li>接受服务器端的Response内容并解析，提取所需的信息</li>
</ul>
<span id="more"></span>

<h1 id="常用Python语法"><a href="#常用Python语法" class="headerlink" title="常用Python语法"></a>常用Python语法</h1><h2 id="字符串的切片和索引"><a href="#字符串的切片和索引" class="headerlink" title="字符串的切片和索引"></a>字符串的切片和索引</h2><p>字符串的切片和索引就是通过<code>string[x]</code>，获取字符串的一部分信息</p>
<h2 id="字符串方法"><a href="#字符串方法" class="headerlink" title="字符串方法"></a>字符串方法</h2><p><strong>split()方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;www.baidu.com&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a.split(<span class="string">&#x27;.&#x27;</span>))</span><br><span class="line"><span class="comment">#result[&#x27;www&#x27;,&#x27;baidu&#x27;,&#x27;com&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>split()方法就是通过给定的分割符，将一个字符串分割为一个列表。<br><strong>repalce()方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;There is apples&#x27;</span></span><br><span class="line">b = a.replace(<span class="string">&#x27;is&#x27;</span>,<span class="string">&#x27;are&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment">#result There are apples</span></span><br></pre></td></tr></table></figure>

<p>类似文本中的”查找替换”功能<br><strong>strip()方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27; python is cool &#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a.strip())</span><br><span class="line"><span class="comment">#result python is cool</span></span><br></pre></td></tr></table></figure>

<p>strip()方法返回去除两侧空格的字符串，也可以指定需要去除的字符，将他们列为参数中即可</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;***python**is**good***&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a.strip(<span class="string">&#x27;*&#x27;</span>))</span><br><span class="line"><span class="comment">#result python**is**good</span></span><br></pre></td></tr></table></figure>

<p><strong>format()方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;&#123;&#125; is my love&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;Python&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment">#result Python is my love</span></span><br></pre></td></tr></table></figure>

<p>字符串格式化符就像是做选择题，留了空给做题者选择。在爬虫过程中，有些网页链接的部分参数是可变的，这时使用字符串格式化符可以减少代码的使用量。<br>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conten = <span class="built_in">input</span>(<span class="string">&#x27;请输入搜索内容&#x27;</span>)</span><br><span class="line">url_path = <span class="string">&#x27;https://www.pexels/com/search/&#123;&#125;/&#x27;</span>.<span class="built_in">format</span>(content)</span><br><span class="line"><span class="built_in">print</span>(url_path)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/8afbde6f337b785ddbe1e3c89cb1605aa0b0b0f53098ecf6cb99fc8fbc494567.png" alt="图 1">  </p>
<h2 id="Python数据结构"><a href="#Python数据结构" class="headerlink" title="Python数据结构"></a>Python数据结构</h2><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><p>特征：</p>
<ul>
<li>列表中的每一个元素都是可变的</li>
<li>列表的元素都是有序的，也就是说每个元素都有对应的位置（类似字符串的切片和索引）</li>
<li>列表可以容纳所有的对象。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&#x27;peter&#x27;</span>,<span class="string">&#x27;lilei&#x27;</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;xiangming&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>[<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>[<span class="number">2</span>:])</span><br><span class="line"><span class="comment">#resutl</span></span><br><span class="line">wangwu</span><br><span class="line">[<span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;xiangming&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>如果是切片，返回的也是列表的数据结构<br>列表会经常用到多重循环</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">names = [<span class="string">&#x27;xiaoming&#x27;</span>,<span class="string">&#x27;wanggu&#x27;</span>,<span class="string">&#x27;peter&#x27;</span>]</span><br><span class="line">ages = [<span class="number">23</span>,<span class="number">15</span>,<span class="number">58</span>]</span><br><span class="line"><span class="keyword">for</span> name,age <span class="keyword">in</span> <span class="built_in">zip</span>(name.ages)</span><br><span class="line">    <span class="built_in">print</span>(name,age)</span><br><span class="line"><span class="comment">#result</span></span><br><span class="line">xiaoming <span class="number">23</span></span><br><span class="line">wanggu <span class="number">15</span></span><br><span class="line">peter <span class="number">58</span></span><br></pre></td></tr></table></figure>

<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><p>Python的字典数据结构与现实中的字典类似，以键值对（‘key’-‘value’）的形式出现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_info=&#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line">    <span class="string">&#x27;age&#x27;</span>:<span class="string">&#x27;23&#x27;</span></span><br><span class="line">    <span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;man&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="元组和集合"><a href="#元组和集合" class="headerlink" title="元组和集合"></a>元组和集合</h3><p>元组类似于列表，但是元组的元素不能修改只能查看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tuple = (1,2,3)</span><br></pre></td></tr></table></figure>

<p>集合的概念类似数学中的集合。每个集合中的元素是无序的，不可以有重复的对象。因此可通过集合把重复的数据去除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&#x27;xiaoming&#x27;</span>,<span class="string">&#x27;zhangyu&#x27;</span>,<span class="string">&#x27;xiaoming&#x27;</span>]</span><br><span class="line"><span class="built_in">set</span> = <span class="built_in">set</span>(<span class="built_in">list</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">set</span>)</span><br><span class="line"><span class="comment">#result &#123;&#x27;zhangyu&#x27;, &#x27;xiaoming&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><p>Python中通过open()函数打开文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">open</span>(name[,mode[,buffering]])</span><br></pre></td></tr></table></figure>

<p>open()函数使用文件名作为唯一的强制参赛，然后返回一个文件对象。模式（mode）和缓冲（buffering）是可选参数。</p>
<p>如果在本机上有名为file.txt的文件，其存储路径为<code>C:\User\Administrator\Desktop</code>，那么可以通过下面代码打开文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;C:\User\Administrator\Desktop\file.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>如果open()函数只是加入文件的路径这一个参数，则只能打开文件并读取文件的相关内容。如果要向文件中写入内容，则必须加入模式这个参赛了。<br>模式参赛的常用值</p>
<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/cd5e7b38fe329e81b4cdfe20540f2653826e80ee7dcb7566667e896aeffbf701.png" alt="图 2">  </p>
<h3 id="读写文件"><a href="#读写文件" class="headerlink" title="读写文件"></a>读写文件</h3><p>python读取文件通过read()方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span> (<span class="string">&#x27;/home/a1ili/Desktop/1.txt&#x27;</span>)</span><br><span class="line">content = f.read()</span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line"><span class="comment">#result</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/aabc0daff737955f57121884ceb93631578010ab39f9121b790f75c9e575d989.png" alt="图 3">  </p>
<h3 id="关闭文件"><a href="#关闭文件" class="headerlink" title="关闭文件"></a>关闭文件</h3><p>当完成读写工作后，应该使用close()方法关闭文件。这样可以保证python进行缓冲的清理和文件的安全性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span> (<span class="string">&#x27;/home/a1ili/Desktop/1.txt&#x27;</span>)</span><br><span class="line">content = f.read()</span><br><span class="line"><span class="built_in">print</span>(content)</span><br><span class="line">f.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Python面向对象"><a href="#Python面向对象" class="headerlink" title="Python面向对象"></a>Python面向对象</h2><h3 id="定义类"><a href="#定义类" class="headerlink" title="定义类"></a>定义类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>:</span><br><span class="line">    compose = [<span class="string">&#x27;frame&#x27;</span>,<span class="string">&#x27;wheel&#x27;</span>,<span class="string">&#x27;pedal&#x27;</span>]</span><br><span class="line"></span><br><span class="line">my_bike = Bike()</span><br><span class="line">you_bike = Bike()</span><br><span class="line"><span class="built_in">print</span>(you_bike.compose)</span><br></pre></td></tr></table></figure>

<p>my_bike就是类的实例，通过<code>.</code>加上类的属性，就是类属性的引用。类的属性会被类的实例共享</p>
<h3 id="实例属性"><a href="#实例属性" class="headerlink" title="实例属性"></a>实例属性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>:</span><br><span class="line">    compose = [<span class="string">&#x27;frame&#x27;</span>,<span class="string">&#x27;wheel&#x27;</span>,<span class="string">&#x27;pedal&#x27;</span>]</span><br><span class="line"></span><br><span class="line">my_bike = Bike()</span><br><span class="line">my_bike.anoter = <span class="string">&#x27;basket&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(my_bike.anoter)</span><br><span class="line"><span class="comment">#result basket</span></span><br></pre></td></tr></table></figure>

<p>通过给类的实例属性进行赋值，也就是实例属性。compose属性属于所有的该款自行车，而other属性只属于my_bike这个类的实例。</p>
<h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>:</span><br><span class="line">    compose = [<span class="string">&#x27;frame&#x27;</span>,<span class="string">&#x27;wheel&#x27;</span>,<span class="string">&#x27;pedal&#x27;</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">use</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;you are riding&#x27;</span>)</span><br><span class="line"></span><br><span class="line">my_bike=Bike()</span><br><span class="line">my_bike.use()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/4179604d4357269cd0803c45a3114da6bcc6bcd5a65fd933c6af17279aefe1c5.png" alt="图 4">  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>:</span><br><span class="line">    compose = [<span class="string">&#x27;frame&#x27;</span>,<span class="string">&#x27;wheel&#x27;</span>,<span class="string">&#x27;pedal&#x27;</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">use</span>(<span class="params">self,time</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;you are ride &#123;&#125;m&#x27;</span>.<span class="built_in">format</span>(time*<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">my_bike=Bike()</span><br><span class="line">my_bike.use(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/e02eb1df0bb076c304c84e8343b3d4b5a257f41de908c4c79bd8536604fbc355.png" alt="图 5">  </p>
<p>python的类中有一些“魔法方法”，<code>__init__()</code>方法就是其中之一。在我们创造实例的时候，不需要引用该方法也会被自动执行</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>:</span><br><span class="line">    compose = [<span class="string">&#x27;frame&#x27;</span>,<span class="string">&#x27;wheel&#x27;</span>,<span class="string">&#x27;pedal&#x27;</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">use</span>(<span class="params">self,time</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;you are ride &#123;&#125;m&#x27;</span>.<span class="built_in">format</span>(time*<span class="number">100</span>))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.other = <span class="string">&#x27;basket&#x27;</span></span><br><span class="line"></span><br><span class="line">my_bike=Bike()</span><br><span class="line"><span class="built_in">print</span>(my_bike.other)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/e54945d1278c258fd0de4af76832a3e493943485a5c4aeeb6d67f6fa67a55d75.png" alt="图 7">  </p>
<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>:</span><br><span class="line">    compose = [<span class="string">&#x27;frame&#x27;</span>,<span class="string">&#x27;wheel&#x27;</span>,<span class="string">&#x27;pedal&#x27;</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">use</span>(<span class="params">self,time</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;you are ride &#123;&#125;m&#x27;</span>.<span class="built_in">format</span>(time*<span class="number">100</span>))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.other = <span class="string">&#x27;basket&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Share_bike</span>(<span class="title class_ inherited__">Bike</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cost</span>(<span class="params">self,hour</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;you spent &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(hour))</span><br><span class="line"></span><br><span class="line">my_bike=Share_bike()</span><br><span class="line"><span class="built_in">print</span>(my_bike.other)</span><br><span class="line">my_bike.cost(<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/6e37d345e26c874d67c98383ea661cda972ed0151e9439bc7a52f23ff2fcbebf.png" alt="图 8">  </p>
<h1 id="多页面爬虫流程"><a href="#多页面爬虫流程" class="headerlink" title="多页面爬虫流程"></a>多页面爬虫流程</h1><p>有的网页存在多页的情况，每页的网页结构都相同或类似，这种流程为</p>
<ol>
<li>手动翻页并观察各网页的URL构成特点，构造出所有的URL存入列表中。</li>
<li>根据URL列表依次循环取出URL</li>
<li>定义爬虫函数</li>
<li>循环调用爬虫函数，存储数据</li>
<li>循环完毕，结束爬虫程序</li>
</ol>
<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/e2d15bbe0adef3531865a6d4fae414c018aac727657896deb762b7cfc0104af7.png" alt="图 1">  </p>
<h1 id="跨页面爬虫流程"><a href="#跨页面爬虫流程" class="headerlink" title="跨页面爬虫流程"></a>跨页面爬虫流程</h1><ol>
<li>定义爬虫函数爬取列表页所有专题的URL</li>
<li>将专题URL存入列表中</li>
<li>定义爬取详细页数据函数</li>
<li>进入专题详细页面爬取详细页数据</li>
<li>存储数据，循环完毕，结束爬虫程序</li>
</ol>
<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/0a7ebde500e1077798346af020b5733b2d0c244fbc50dedc415fcc1b963b4329.png" alt="图 2">  </p>
<h1 id="网页构造"><a href="#网页构造" class="headerlink" title="网页构造"></a>网页构造</h1><p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/1edb085d880b0f18d7a503c2e437446001797c769e08b9fa41ef950965f74a6a.png" alt="图 3"><br>图中左侧为HTML文件，右侧为CSS样式，用<code>&lt;script&gt;&lt;/script&gt;</code>标签的就是<code>JavaScript</code>代码。用户浏览的网页就是浏览器选然后的结果，如果把网页比喻成房子的话，那么HTML为房子的框架和格局（几室几厅)，css就是房子的样式（地板、房漆）, JavaScript 就是房子中的电器 。</p>
<h1 id="爬虫三大库"><a href="#爬虫三大库" class="headerlink" title="爬虫三大库"></a>爬虫三大库</h1><h2 id="Requests库"><a href="#Requests库" class="headerlink" title="Requests库"></a>Requests库</h2><p>使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">res = requests.get(<span class="string">&#x27;http://bj.xiaozhu.com&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>

<p>返回的结果就是网页的源代码<br>有时爬虫需要加入请求头来伪装成浏览器，以便更好地抓取数据。在Chrome浏览器中按F12键打开Chrome开发者工具，刷新网页后找到 User-Agent 进行复制<br>请求头的使用方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">res = requests.get(<span class="string">&#x27;http://bj.xiaozhu.com&#x27;</span>,headers=headers)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>

<p>Requests 库不仅有get()方法，还有post()等方法。post()方法用于提交表单来爬取需要登录才能获得数据的网站</p>
<h2 id="Requests库的错误和异常"><a href="#Requests库的错误和异常" class="headerlink" title="Requests库的错误和异常"></a>Requests库的错误和异常</h2><ul>
<li>Requests抛出一个ConnectionError异常，原因为网络问题（如 DNS 查询失败、拒绝连接等）</li>
<li>Response.raise_for_status（）抛出一个HTTPError异常，原因为HTTP请求返回了不成功的状态码（如网页不存在，返回 404 错误)</li>
<li>Requests抛出一个Timeout异常，原因为请求超时。</li>
<li>Requests抛出一个TooMa町Redirects异常，原因为请求超过了设定的最重定向次数。</li>
</ul>
<p>所有Requests显式抛出的异常都继承自requests.exceptions.RequestException，这时，可通过Python中的try来避免异常</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">res = requests.get(<span class="string">&#x27;https://bj.xiaozhu.com/&#x27;</span>,headers=headers)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(res.text)</span><br><span class="line"><span class="keyword">except</span> ConnectionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;连接失败&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="BeautifulSoup库"><a href="#BeautifulSoup库" class="headerlink" title="BeautifulSoup库"></a>BeautifulSoup库</h2><p>通过 BeautifulSoup 库可以轻松地解析 Requests 库请求的网页，并把网页源代码解析为 Soup 文档，以便过滤提取数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">res = requests.get(<span class="string">&#x27;https://bj.xiaozhu.com/&#x27;</span>,headers=headers)</span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br><span class="line">soup = BeautifulSoup(res.text,<span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.prettify())</span><br></pre></td></tr></table></figure>

<p>Beautifulsoup除了支持Python标准库中的HTML解析器外，还支持一些第三方的解析器</p>
<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/98cdeb8165b2b10f16bf3395f8e8e8947c9264d3de8d4e36d69dc56c86381cc2.png" alt="图 1">  </p>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><p><strong>find_all()</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">find_all(tag,attibutes,recursive,text,limit,keywords)</span><br><span class="line"></span><br><span class="line">soup.find_all(<span class="string">&#x27;div&#x27;</span>,<span class="string">&quot;item&quot;</span>)<span class="comment">##查找div标签，class=&quot;item&quot;</span></span><br><span class="line">soup.find_all(<span class="string">&#x27;div&#x27;</span>,<span class="keyword">class</span>=<span class="string">&#x27;item&#x27;</span>)</span><br><span class="line">soup.find_all(<span class="string">&#x27;div&#x27;</span>,attrs=&#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&quot;item&quot;</span>&#125;) <span class="comment"># attrs参数定义一个字典来搜索包含特殊属性的tag</span></span><br></pre></td></tr></table></figure>

<p><strong>find()方法</strong></p>
<p>find()方法与find_all()方法类似，只是find_all()方法返回的是文档中符合条件的所有tag ，是一个集合(class’bs4.element.ResultSet’),find()方法返回的一个Tag(class’bs4 .element.Tag’)<br><strong>selector()方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.selector(div.item&gt;a&gt;h1) <span class="comment">#括号内容通过Chorm复制得道</span></span><br></pre></td></tr></table></figure>

<ul>
<li>鼠标定位到想要提取的数据位置，右击，在弹出的快捷菜单中选择“检查”命令。</li>
<li>在网页源代码中右击所选元素</li>
<li>在弹出的快捷菜单中选择Copy selector。</li>
</ul>
<p>案例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_info</span>(<span class="params">url</span>):</span><br><span class="line">    wb_data = requests.get(<span class="string">&#x27;http://www.kugou.com/yy/rank/home/1-8888.html&#x27;</span>,headers=headers)</span><br><span class="line">    soup = BeautifulSoup(wb_data.text,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    ranks = soup.select(<span class="string">&#x27;span.pc_temp_num&#x27;</span>)</span><br><span class="line">    titles = soup.select(<span class="string">&#x27;div.pc_temp_songlist &gt; ul &gt; li&gt; a&#x27;</span>)</span><br><span class="line">    times = soup.select(<span class="string">&#x27;div.pc_temp_songlist &gt; ul &gt; li&gt; span.pc_temp_tips_r &gt; span&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> rank,title,time <span class="keyword">in</span> <span class="built_in">zip</span>(ranks,titles,times):</span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">&#x27;rank&#x27;</span>:rank.get_text().strip(),</span><br><span class="line">            <span class="string">&#x27;singer&#x27;</span>:title.get_text().split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>],</span><br><span class="line">            <span class="string">&#x27;song&#x27;</span>:title.get_text().split(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>],</span><br><span class="line">            <span class="string">&#x27;time&#x27;</span>:time.get_text().strip()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    urls = [<span class="string">&#x27;http://www.kugou.com/yy/rank/home/&#123;&#125;-8888.html&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(i)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">24</span>)]</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        get_info(url)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/96d7eb1f96d9cb2947a2ecfb50ae8fee040538860db4ee0ce317d97cf7979626.png" alt="图 2">  </p>
<p>本案例并未完全使用“Copy selector”，的全部信息，由于有些标签是固定的,因此选用部分路径即可。</p>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>Python中的re模块拥有着全部的正则表达式功能，为网络爬虫提供了可能。</p>
<h2 id="一般字符"><a href="#一般字符" class="headerlink" title="一般字符"></a>一般字符</h2><table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>.</code></td>
<td>匹配任意单个字符（不包括换行符\n）</td>
</tr>
<tr>
<td><code>\</code></td>
<td>转义字符（把有特殊含义的字符转换成字面意思）</td>
</tr>
<tr>
<td><code>[...]</code></td>
<td>字符集。对应字符集中的任意字符</td>
</tr>
</tbody></table>
<p>说明：</p>
<ol>
<li><code>.</code>字符为匹配任意单个字符。例如， <code>a.b</code> 可以的匹配结果为 abc、aic、a&amp;c等，但不包括换行符。</li>
<li><code>\</code>字符为转义字符，可以把字符改变为原来的意思。听上去不是很好理解，例如<code>.</code>字符是匹配任意的单个字符,但有时不需要这个功能，只想让它代表一个点，这时就可以使用<code>\.</code>，就能匹配为<code>.</code>了。</li>
<li><code>[...］</code>为字符集，相当于在中括号中任选一个。例如 a[bcd］，匹配的结果为ab、ac和ad 。</li>
</ol>
<h2 id="预定以字符集"><a href="#预定以字符集" class="headerlink" title="预定以字符集"></a>预定以字符集</h2><table>
<thead>
<tr>
<th>预定以字符集</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>\d</code></td>
<td>匹配一个数字字符，等价于<code>[0-9]</code></td>
</tr>
<tr>
<td><code>\D</code></td>
<td>匹配一个非数字字符，等价于<code>[^0-9]</code></td>
</tr>
<tr>
<td><code>\s</code></td>
<td>匹配任何空白字符，包括空格，制表符，换页符等，等价于<code>[\f\n\r\t\v]</code></td>
</tr>
<tr>
<td><code>\S</code></td>
<td>匹配任何非空白字符，等价于<code>[^\f\n\r\t\v]</code></td>
</tr>
<tr>
<td><code>\w</code></td>
<td>匹配包括下划线的任何单词字符，等价于<code>[A-Za-z0-9]</code></td>
</tr>
<tr>
<td><code>\W</code></td>
<td>匹配任何非单词字符。等价于<code>[^A-Za-z0-9_]</code></td>
</tr>
</tbody></table>
<h2 id="数量词"><a href="#数量词" class="headerlink" title="数量词"></a>数量词</h2><table>
<thead>
<tr>
<th>数量词</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>*</code></td>
<td>匹配前一个字符0或无限次</td>
</tr>
<tr>
<td><code>+</code></td>
<td>匹配前一个字符1或无限次</td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配前一个字符0或1次</td>
</tr>
<tr>
<td><code>&#123;m&#125;</code></td>
<td>匹配前一个字符m次</td>
</tr>
<tr>
<td><code>&#123;m,n&#125;</code></td>
<td>匹配前一个字符m次至n次</td>
</tr>
</tbody></table>
<p>说明：</p>
<ol>
<li>“＊”数量词匹配前一个字符 0 或无限次。例如， ab*c 匹配 ac、abc、abbc和abbbc等。</li>
<li>“＋”与”*”很类似，只是至少匹配前一个字符一次。例如，ab+c匹配abc、abbc和 abbbc 等。</li>
<li>“?”数量词匹配前一个字符0或1次。例如，ab?c匹配ac和abc 。</li>
<li>“｛m｝”数量词匹配前一个字符 m 次 。例如，ab{3}c 匹配 abbbc 。</li>
<li>“{m,n}”数量词匹配前一个字符 m 至 n 次。例如， ab {1, 3}c 匹配 abc、abbc和abbbc</li>
</ol>
<h2 id="边界匹配"><a href="#边界匹配" class="headerlink" title="边界匹配"></a>边界匹配</h2><table>
<thead>
<tr>
<th>边界匹配</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>^</code></td>
<td>匹配字符串开头</td>
</tr>
<tr>
<td><code>$</code></td>
<td>匹配字符串结尾</td>
</tr>
<tr>
<td><code>\A</code></td>
<td>仅匹配字符串开头</td>
</tr>
<tr>
<td><code>\Z</code></td>
<td>仅匹配字符串结尾</td>
</tr>
</tbody></table>
<p>说明：</p>
<ol>
<li>“A”匹配字符串的开头。例如，让^abc匹配 abc 开头的字符串。</li>
<li>“$”匹配字符串的结尾 。 例如，abc$ 匹配 abc 结尾的字符串。</li>
<li>“\A”匹配字符串的结尾。例如， \Aabc。</li>
<li>“\Z”匹配字符串的结尾。例如， abc\Z 。</li>
</ol>
<h2 id="re模块及其方法"><a href="#re模块及其方法" class="headerlink" title="re模块及其方法"></a>re模块及其方法</h2><h3 id="search-函数"><a href="#search-函数" class="headerlink" title="search()函数"></a>search()函数</h3><p>匹配并提取第一个符合规律的内容，返回一个正则表达式对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.match(pattern,string,flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>其中</p>
<ul>
<li>pattern为匹配的正则表达式</li>
<li>string为要匹配的字符串</li>
<li>flags为标志位，用户控制正则表达式的匹配方式，如是否区分大小写，多行匹配等</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">a = <span class="string">&#x27;one1two2three3&#x27;</span></span><br><span class="line">infos = re.search(<span class="string">&#x27;\d+&#x27;</span>,a)</span><br><span class="line"><span class="built_in">print</span>(infos) <span class="comment">#search方法返回的是正则表达式对象</span></span><br><span class="line"><span class="built_in">print</span>(infos.group())</span><br></pre></td></tr></table></figure>

<h3 id="sub-函数"><a href="#sub-函数" class="headerlink" title="sub()函数"></a>sub()函数</h3><p>用于替换字符串中的匹配项</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.sub(pattern,repl,string,count=<span class="number">0</span>,flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>其中：</p>
<ol>
<li>pattern为匹配的正则表达式</li>
<li>repl为替换的字符串</li>
<li>string为要被查找替换的原始字符串</li>
<li>counts为模式匹配后替换的最大次数，默认0表示替换所有的匹配</li>
<li>flags为标志位，用于控制正则表达式的匹配方式，如是否区分大小写，多行匹配等。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">phone = <span class="string">&#x27;123-456-789&#x27;</span></span><br><span class="line">new_phone = re.sub(<span class="string">&#x27;\D&#x27;</span>,<span class="string">&#x27;&#x27;</span>,phone)</span><br><span class="line"><span class="built_in">print</span>(new_phone) <span class="comment">#sub()方法用于替换</span></span><br></pre></td></tr></table></figure>

<h3 id="findall-函数"><a href="#findall-函数" class="headerlink" title="findall()函数"></a>findall()函数</h3><p>findall()函数匹配所有符合规律的内容，并以列表的形式返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">a = <span class="string">&#x27;one1two2three3&#x27;</span></span><br><span class="line">infos = re.findall(<span class="string">&#x27;\d+&#x27;</span>,a)</span><br><span class="line"><span class="built_in">print</span>(infos)</span><br></pre></td></tr></table></figure>

<h3 id="re模块修饰符"><a href="#re模块修饰符" class="headerlink" title="re模块修饰符"></a>re模块修饰符</h3><table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>re.I</td>
<td>使匹配对大小写不敏感</td>
</tr>
<tr>
<td>re.L</td>
<td>做本地化识别（local-aware）匹配</td>
</tr>
<tr>
<td>re.M</td>
<td>多行匹配，影响^和$</td>
</tr>
<tr>
<td>re.S</td>
<td>使匹配包括换行在内的所有字符</td>
</tr>
<tr>
<td>re.U</td>
<td>根据Unicode字符集解析字符。这个标志影响\w,\W,\b,\B</td>
</tr>
<tr>
<td>re.X</td>
<td>该标志通过给予更灵活的格式，以便将正则表达式写得更易理解</td>
</tr>
</tbody></table>
<p>案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">f=<span class="built_in">open</span>(<span class="string">&#x27;/home/a1ili/Y-A/doupo.txt&#x27;</span>,<span class="string">&#x27;a+&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_info</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(url,headers=headers)</span><br><span class="line">    <span class="keyword">if</span> res.status_code == <span class="number">200</span>:</span><br><span class="line">        contents = re.findall(<span class="string">&#x27;&lt;p&gt;(.*?)&lt;/p&gt;&#x27;</span>,res.content.decode(<span class="string">&#x27;utf-8&#x27;</span>),re.S)</span><br><span class="line">        <span class="keyword">for</span> content <span class="keyword">in</span> contents:</span><br><span class="line">            f.write(content+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    urls = [<span class="string">&#x27;http://www.doupoxs.com/doupocangqiong/&#123;&#125;.html&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(i)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">1665</span>)]</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        get_info(url)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<h1 id="LXML库与Xpath语法"><a href="#LXML库与Xpath语法" class="headerlink" title="LXML库与Xpath语法"></a>LXML库与Xpath语法</h1><p>Lxml库是基于libxml2的XML解析库的Python封装。该模块使用 C 语言编写，解析速度比 Beautiful Soup 更快。 Lxml 库使用 Xpath 语法解析定位网页数据。</p>
<h2 id="LXML库的使用"><a href="#LXML库的使用" class="headerlink" title="LXML库的使用"></a>LXML库的使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li class=&quot;red&quot;&gt;&lt;h1&gt;red flower&lt;/h1&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class=&quot;yellow&quot;&gt;&lt;h2&gt;yellow flower&lt;/h2&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class=&quot;white&quot;&gt;&lt;h3&gt;white flower&lt;/h3&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">html = etree.HTML(text)</span><br><span class="line"><span class="built_in">print</span>(html)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/0b1e53f6758ae790a333a394d56f4d9ca54d69bde372c9dafb5549e17af92075.png" alt="图 9">  </p>
<p>etree库把HTML文档解析为Element对象，可以通过下面代码输出解析过的HTML文档。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">text = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li class=&quot;red&quot;&gt;&lt;h1&gt;red flower&lt;/h1&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class=&quot;yellow&quot;&gt;&lt;h2&gt;yellow flower&lt;/h2&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li class=&quot;white&quot;&gt;&lt;h3&gt;white flower&lt;/h3&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">html = etree.HTML(text)</span><br><span class="line">result = etree.tostring(html)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment">#result</span></span><br><span class="line"><span class="string">b&#x27;&lt;html&gt;&lt;body&gt;&lt;div&gt;\n    &lt;ul&gt;\n        &lt;li class=&quot;red&quot;&gt;&lt;h1&gt;red flower&lt;/h1&gt;&lt;/li&gt;\n        &lt;li class=&quot;yellow&quot;&gt;&lt;h2&gt;yellow flower&lt;/h2&gt;&lt;/li&gt;\n        &lt;li class=&quot;white&quot;&gt;&lt;h3&gt;white flower&lt;/h3&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n&lt;/body&gt;&lt;/html&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>lxml继承了libxml2的特性，具有自动修正html代码的功能。添加了html和body标签</p>
<h2 id="读取html文件"><a href="#读取html文件" class="headerlink" title="读取html文件"></a>读取html文件</h2><p>除了直接读取 字符串，lxml库还支持从文件中提取内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">html = etree.parse(<span class="string">&#x27;color.html&#x27;</span>)</span><br><span class="line">result = etree.tostring(html,pretty_print=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p>html文件与代码文件在同一层时，用相对路径，不再同一层时使用绝对路径</p>
<p>在同一路径新建color.html，文件内容如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>flower<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;red&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>red flower<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;yellow&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>yellow flower<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;white&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">h3</span>&gt;</span>white flower<span class="tag">&lt;/<span class="name">h3</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="解析html文件"><a href="#解析html文件" class="headerlink" title="解析html文件"></a>解析html文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">res= requests.get(<span class="string">&#x27;https://book.douban.com/top250&#x27;</span>,headers=headers)</span><br><span class="line">html = etree.HTML(res.text)</span><br><span class="line"><span class="built_in">print</span>(html)</span><br><span class="line">result = etree.tostring(html)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Xpath语法"><a href="#Xpath语法" class="headerlink" title="Xpath语法"></a>Xpath语法</h2><p>Xpath是一门在xml文档中查找信息的语言</p>
<h3 id="节点选择"><a href="#节点选择" class="headerlink" title="节点选择"></a>节点选择</h3><table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>nodename</td>
<td>选取此节点的所有子节点</td>
</tr>
<tr>
<td><code>/</code></td>
<td>从根节点选取</td>
</tr>
<tr>
<td><code>//</code></td>
<td>从匹配选择的当前节点选择文档中的节点，而不考虑他们的位置</td>
</tr>
<tr>
<td><code>.</code></td>
<td>选取当前节点</td>
</tr>
<tr>
<td><code>..</code></td>
<td>选取当前节点的父节点</td>
</tr>
<tr>
<td><code>@</code></td>
<td>选取属性</td>
</tr>
</tbody></table>
<p><strong>节点选择实例</strong></p>
<table>
<thead>
<tr>
<th>路径表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td><code>user_database</code></td>
<td>选取元素<code>user_database</code>的所有子节点</td>
</tr>
<tr>
<td><code>/user_database</code></td>
<td>选取根元素user_database。注释：假如路径起始于正斜杠（&#x2F;），则此路经始终代表到某元素的绝对路径</td>
</tr>
<tr>
<td>user_database&#x2F;user</td>
<td>选取属于user_database的子元素的所有user元素</td>
</tr>
<tr>
<td><code>//user</code></td>
<td>选取所有user子元素，而不管他们在文档中的位置</td>
</tr>
<tr>
<td><code>user_database//user</code></td>
<td>选择属于user_databae元素的后代的所有user元素，而不管他们位于user_database之下的什么位置</td>
</tr>
<tr>
<td><code>//@attribute</code></td>
<td>选取名为attibute的所有属性</td>
</tr>
</tbody></table>
<p>Xpath语法中的谓语用来查找某个特定的节点或者包含某个指定值的节点，谓语被嵌套在方括号中。</p>
<table>
<thead>
<tr>
<th>路径表达式</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td><code>/user_database/user[1]</code></td>
<td>选取属于user_database子元素的第一个user元素</td>
</tr>
<tr>
<td><code>//li@attribute()</code></td>
<td>选取所有拥有名为attribute属性的li元素</td>
</tr>
<tr>
<td><code>//li[@attribute=&#39;red&#39;</code>]</td>
<td>选取所有li元素，且这些元素拥有值为red的attribute属性</td>
</tr>
</tbody></table>
<h2 id="使用技巧"><a href="#使用技巧" class="headerlink" title="使用技巧"></a>使用技巧</h2><p>步骤：</p>
<ol>
<li>鼠标定位到想要提取的数据位置，右击，从弹出的快捷菜单中选择“检查”命令。</li>
<li>在网页源码中右击所选元素</li>
<li>从弹出的快捷菜单中选择copy Xpath命令。</li>
</ol>
<p>当需要进行批量爬取时，通过类似Beautiful中的selector()方法删除谓语部分是不可行的。这时的思路为”先抓大后抓小，寻找循环点”。</p>
<p>有时候会遇到相同的字符开头的多个标签：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tag-1&quot;</span>&gt;</span>需要的内容1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tag-2&quot;</span>&gt;</span>需要的内容2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tag-3&quot;</span>&gt;</span>需要的内容3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>想要同时爬取时，不需要构造多个Xpath路径，通过start-with()便可以获取多个标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;tag-1&quot;&gt;需要的内容1&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;tag-2&quot;&gt;需要的内容2&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;tag-3&quot;&gt;需要的内容3&lt;/li&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">selector = etree.HTML(html)</span><br><span class="line">contents = selector.xpath(<span class="string">&#x27;//li[starts-with(@class,&quot;tag&quot;)]/text()&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> content <span class="keyword">in</span> contents:</span><br><span class="line">    <span class="built_in">print</span>(content)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/74b51a3caf99edb6561cfc1147d08365c77ff3babbb4c3dc70373eda0d3bbb0e.png" alt="图 10">  </p>
<p>当遇到标签套标签的情况时：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;red&quot;</span>&gt;</span>需要的内容1</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>需要的内容2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>向同时爬取文本内容，可以通过string(.)完成：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">html = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;div class=&quot;red&quot;&gt;需要的内容1</span></span><br><span class="line"><span class="string">    &lt;h1&gt;需要的内容2&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">selector = etree.HTML(html)</span><br><span class="line">content1 = selector.xpath(<span class="string">&#x27;//div[@class=&quot;red&quot;]&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">content2 = content1.xpath(<span class="string">&#x27;string(.)&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(content2)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/25/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/3b5dbe9beef8e4dc98e0e94be6d3f4b953f5dac1c6b10b92f71f40f0d95f6306.png" alt="图 11">  </p>
<p>案例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">fp = <span class="built_in">open</span>(<span class="string">&#x27;douabn.csv&#x27;</span>,<span class="string">&#x27;wt&#x27;</span>,newline=<span class="string">&#x27;&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">writer = csv.writer(fp)</span><br><span class="line">writer.writerow((<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;url&#x27;</span>,<span class="string">&#x27;author&#x27;</span>,<span class="string">&#x27;publisher&#x27;</span>,<span class="string">&#x27;date&#x27;</span>,<span class="string">&#x27;price&#x27;</span>,<span class="string">&#x27;rate&#x27;</span>,<span class="string">&#x27;comment&#x27;</span>))</span><br><span class="line">urls = [<span class="string">&#x27;https://book.douban.com/top250?start=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(i)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">250</span>,<span class="number">25</span>)]</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    html = requests.get(url,headers=headers)</span><br><span class="line">    selector = etree.HTML(html.text)</span><br><span class="line">    infos = selector.xpath(<span class="string">&#x27;//tr[@class = &quot;item&quot;]&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> info <span class="keyword">in</span> infos:</span><br><span class="line">        name = info.xpath(<span class="string">&#x27;td/div/a/@title&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        url = info.xpath(<span class="string">&#x27;//td/div/a/@href&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        book_infos = info.xpath(<span class="string">&#x27;td/p/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        auth = book_infos.split(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        publisher = book_infos.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">3</span>]</span><br><span class="line">        data = book_infos.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">2</span>]</span><br><span class="line">        price = book_infos.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">        rate = info.xpath(<span class="string">&#x27;td/div/span[2]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        comments = info.xpath(<span class="string">&#x27;td/p/span/text()&#x27;</span>)</span><br><span class="line">        comment = comments[<span class="number">0</span>] <span class="keyword">if</span> <span class="built_in">len</span>(comments) != <span class="number">0</span> <span class="keyword">else</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        writer.writerow((name,url,auth,publisher,data,price,rate,comment))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>书名：《从零开始学爬虫》</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%88%AC%E8%99%AB/" rel="tag"># 爬虫</a>
              <a href="/tags/python/" rel="tag"># python</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/04/23/%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/" rel="prev" title="文件结构">
      <i class="fa fa-chevron-left"></i> 文件结构
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/05/01/Objection/" rel="next" title="Objection">
      Objection <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">1.</span> <span class="nav-text">原理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8Python%E8%AF%AD%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">常用Python语法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%88%87%E7%89%87%E5%92%8C%E7%B4%A2%E5%BC%95"><span class="nav-number">2.1.</span> <span class="nav-text">字符串的切片和索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95"><span class="nav-number">2.2.</span> <span class="nav-text">字符串方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.</span> <span class="nav-text">Python数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%97%E8%A1%A8"><span class="nav-number">2.3.1.</span> <span class="nav-text">列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E5%85%B8"><span class="nav-number">2.3.2.</span> <span class="nav-text">字典</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%83%E7%BB%84%E5%92%8C%E9%9B%86%E5%90%88"><span class="nav-number">2.3.3.</span> <span class="nav-text">元组和集合</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-number">2.4.</span> <span class="nav-text">文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6"><span class="nav-number">2.4.1.</span> <span class="nav-text">打开文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6"><span class="nav-number">2.4.2.</span> <span class="nav-text">读写文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6"><span class="nav-number">2.4.3.</span> <span class="nav-text">关闭文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.5.</span> <span class="nav-text">Python面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E7%B1%BB"><span class="nav-number">2.5.1.</span> <span class="nav-text">定义类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7"><span class="nav-number">2.5.2.</span> <span class="nav-text">实例属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="nav-number">2.5.3.</span> <span class="nav-text">实例方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="nav-number">2.6.</span> <span class="nav-text">类的继承</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E9%A1%B5%E9%9D%A2%E7%88%AC%E8%99%AB%E6%B5%81%E7%A8%8B"><span class="nav-number">3.</span> <span class="nav-text">多页面爬虫流程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B7%A8%E9%A1%B5%E9%9D%A2%E7%88%AC%E8%99%AB%E6%B5%81%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">跨页面爬虫流程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E6%9E%84%E9%80%A0"><span class="nav-number">5.</span> <span class="nav-text">网页构造</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%88%AC%E8%99%AB%E4%B8%89%E5%A4%A7%E5%BA%93"><span class="nav-number">6.</span> <span class="nav-text">爬虫三大库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Requests%E5%BA%93"><span class="nav-number">6.1.</span> <span class="nav-text">Requests库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Requests%E5%BA%93%E7%9A%84%E9%94%99%E8%AF%AF%E5%92%8C%E5%BC%82%E5%B8%B8"><span class="nav-number">6.2.</span> <span class="nav-text">Requests库的错误和异常</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BeautifulSoup%E5%BA%93"><span class="nav-number">6.3.</span> <span class="nav-text">BeautifulSoup库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">6.3.1.</span> <span class="nav-text">常用方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">7.</span> <span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E8%88%AC%E5%AD%97%E7%AC%A6"><span class="nav-number">7.1.</span> <span class="nav-text">一般字符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%84%E5%AE%9A%E4%BB%A5%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="nav-number">7.2.</span> <span class="nav-text">预定以字符集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E9%87%8F%E8%AF%8D"><span class="nav-number">7.3.</span> <span class="nav-text">数量词</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%B9%E7%95%8C%E5%8C%B9%E9%85%8D"><span class="nav-number">7.4.</span> <span class="nav-text">边界匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re%E6%A8%A1%E5%9D%97%E5%8F%8A%E5%85%B6%E6%96%B9%E6%B3%95"><span class="nav-number">7.5.</span> <span class="nav-text">re模块及其方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#search-%E5%87%BD%E6%95%B0"><span class="nav-number">7.5.1.</span> <span class="nav-text">search()函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sub-%E5%87%BD%E6%95%B0"><span class="nav-number">7.5.2.</span> <span class="nav-text">sub()函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#findall-%E5%87%BD%E6%95%B0"><span class="nav-number">7.5.3.</span> <span class="nav-text">findall()函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re%E6%A8%A1%E5%9D%97%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">7.5.4.</span> <span class="nav-text">re模块修饰符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LXML%E5%BA%93%E4%B8%8EXpath%E8%AF%AD%E6%B3%95"><span class="nav-number">8.</span> <span class="nav-text">LXML库与Xpath语法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#LXML%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">8.1.</span> <span class="nav-text">LXML库的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96html%E6%96%87%E4%BB%B6"><span class="nav-number">8.2.</span> <span class="nav-text">读取html文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90html%E6%96%87%E4%BB%B6"><span class="nav-number">8.3.</span> <span class="nav-text">解析html文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Xpath%E8%AF%AD%E6%B3%95"><span class="nav-number">8.4.</span> <span class="nav-text">Xpath语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8A%82%E7%82%B9%E9%80%89%E6%8B%A9"><span class="nav-number">8.4.1.</span> <span class="nav-text">节点选择</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7"><span class="nav-number">8.5.</span> <span class="nav-text">使用技巧</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Brave Laughter"
      src="/images/85364458.jfif">
  <p class="site-author-name" itemprop="name">Brave Laughter</p>
  <div class="site-description" itemprop="description">埋头苦干的劲头 抬头看路的清醒</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Brave Laughter</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
